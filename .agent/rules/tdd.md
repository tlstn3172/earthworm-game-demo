# TDD (Test-Driven Development) 규칙

## 개요
이 프로젝트의 **코어 로직**은 반드시 TDD(Test-Driven Development) 방식으로 구현해야 합니다.
UI 컴포넌트는 TDD 대상에서 제외됩니다.

## TDD 적용 범위

### ✅ TDD 필수 적용
- **게임 엔진** (`GameEngine.js`)
- **모델 클래스** (`Snake.js`, `Food.js`, `Obstacle.js`)
- **상태 관리** (`StateManager.js`)
- **스토리지 관리** (`StorageManager.js`)
- **유틸리티 함수** (`helpers.js`)
- **충돌 감지 로직**
- **점수 계산 로직**

### ❌ TDD 제외
- **UI 컴포넌트** (HTML/CSS)
- **렌더러** (`Renderer.js`) - Canvas 렌더링
- **입력 핸들러** (`InputHandler.js`) - DOM 이벤트 처리
- **오디오 관리** (`AudioManager.js`) - Web Audio API

## TDD 개발 사이클

1. 🔴 Red: 실패하는 테스트 작성
2. 🟢 Green: 테스트를 통과하는 최소한의 코드 작성
3. 🔵 Refactor: 코드 리팩토링
4. 반복

## 규칙

### 1. 테스트 우선 작성
- 코드를 작성하기 전에 반드시 테스트를 먼저 작성
- 테스트가 실패하는 것을 확인한 후 구현 시작

### 2. 테스트 커버리지
- **코어 로직**: 최소 80% 이상의 테스트 커버리지 유지
- **중요 로직**: 100% 커버리지 목표
- **엣지 케이스**: 반드시 테스트 작성

### 3. 테스트 파일 구조
- 테스트 파일은 소스 파일과 같은 폴더에 위치
- 파일명: `*.test.js`

### 4. 테스트 독립성
- 각 테스트는 독립적으로 실행 가능해야 함
- beforeEach를 사용하여 매 테스트마다 새 인스턴스 생성

### 5. 모의 객체(Mock) 사용
- 외부 의존성은 모의 객체로 대체
- jest.fn()을 활용한 함수 호출 검증

## 테스트 실행

### 개발 중
`npm test -- --watch`

### 커밋 전
`npm test`
`npm test -- --coverage`

## 체크리스트

새로운 코어 로직을 추가할 때:
- [ ] 테스트 파일 생성 (`*.test.js`)
- [ ] 실패하는 테스트 작성 (Red)
- [ ] 테스트를 통과하는 최소 코드 작성 (Green)
- [ ] 코드 리팩토링 (Refactor)
- [ ] 엣지 케이스 테스트 추가
- [ ] 커버리지 80% 이상 확인
- [ ] 테스트 통과 확인 후 커밋
